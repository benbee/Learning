/* 读设备*/
ssize_t xxx_read(struct file *filp, char _ _user *buf, size_t count,
				 loff_t*f_pos)
{
	...
	copy_to_user(buf, ..., ...);
	...
		}
/* 写设备*/
ssize_t xxx_write(struct file *filp, const char _ _user *buf, size_t
				  loff_t *f_pos)
{
	...
	copy_from_user(..., buf, ...);
	...
		}
/* ioctl 函数 */
int xxx_ioctl(struct inode *inode, struct file *filp, unsigned int
			  unsigned long arg)
{
	...
	switch (cmd)
	{
	case XXX_CMD1:
		...
		break;
	case XXX_CMD2:
		...
		break;
	default:
/* 不能支持的命令 */
		return - ENOTTY;
	}
	return 0;
}